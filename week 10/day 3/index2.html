<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<p id="result"></p>
<body>
    <script>

const result = document.getElementById("result")

        //using ASYNC AWAIT WITH THE FETCH API (RETRIEVE JSON) USING INTERNAL DATA FOLDER

        async function loadUsers() {
            //const response = await fectch("users.json");
            // const users = await response.json();
            // return users;
            // OR
            return (await fetch("users.json")).json();
        }

        document.addEventListener("DOMContentLoaded", async() => {
            let users = []
            try{
                users = await result.innerHTML.loadUsers();
                
            } catch (e) {
                console.log("Error!")
                console.log(e);
            }
         
            console.log(users);
        });
    </script>



<!-- USING EXTERNAL DATA USING TRADITIONAL .THEN FORMAT-->

<h1>Users:</h1>
<ul></ul>

<script>
    fetch("https://jsonplaceholder.typicode.com/users")
    .then(res => {
        return res.json();
    }).then(data => {
        data.forEach(user => {
            const markup = `<li>${user.name}</li>`;

            document.querySelector("ul").insertAdjacentHTML("beforeend", markup);
        })
    }) .catch(error => console.log(error));
</script>


<!-- USING EXTERNAL DATA WITH ASYNC AWAIT INSTEAD OF .THEN  -->

<script>
    async function fetchData() {
      try {
        const res = await fetch("https://jsonplaceholder.typicode.com/users");
        const data = await res.json();
        
        data.forEach(user => {
          const markup = `<li>${user.name}</li>`;
          document.querySelector("ul").insertAdjacentHTML("beforeend", markup);
        });
        
      } catch (error) {
        console.log(error);
      }
    }
    
    fetchData();
  </script>
  
</body>
</html>